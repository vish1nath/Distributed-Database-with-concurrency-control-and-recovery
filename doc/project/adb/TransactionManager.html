<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Sun Nov 30 13:37:56 EST 2014 -->
<TITLE>
TransactionManager
</TITLE>

<META NAME="date" CONTENT="2014-11-30">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TransactionManager";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../project/adb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TransactionManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../project/adb/Transaction.html" title="class in project.adb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?project/adb/TransactionManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TransactionManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
project.adb</FONT>
<BR>
Class TransactionManager</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>project.adb.TransactionManager</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>TransactionManager</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
A singleton class to hold the instance of the transaction manager.
 This class manages which sites to contact and lock given an instruction.
 It maintains a linked list of all the transactions.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Darren Levy, Viswanath Kammula</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;<A HREF="../../project/adb/TransactionManager.html" title="class in project.adb">TransactionManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#INSTANCE">INSTANCE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../project/adb/Outputter.html" title="class in project.adb">Outputter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#output">output</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../project/adb/Site.html" title="class in project.adb">Site</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#sites">sites</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.LinkedList&lt;<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#transactions">transactions</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#TransactionManager()">TransactionManager</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This private constructor populates the transaction manager's sites.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#abort(project.adb.Transaction, java.lang.String)">abort</A></B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction,
      java.lang.String&nbsp;reason)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the transaction's state to aborted and removes any locks it held
 on all sites.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#addTransaction(project.adb.Transaction)">addTransaction</A></B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a transaction to the list of transactions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#checkWaitingTransactions()">checkWaitingTransactions</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if waiting transactions can be attempted again.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#dump()">dump</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when dump() instruction sent,
 this method dumps each site's indexes and corresponding values.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#dumpIndex(int)">dumpIndex</A></B>(int&nbsp;index)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when dump(xi) instruction sent,
 this method dumps the given index's corresponding values at each site.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#dumpSite(int)">dumpSite</A></B>(int&nbsp;siteID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when dump(i) instruction sent,
 this method dumps the given site's indexes and corresponding values.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#endTransaction(int)">endTransaction</A></B>(int&nbsp;tID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when a transaction ends, all its writes are committed and so
 values at sites are updated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#findTransactionBy(int)">findTransactionBy</A></B>(int&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Finds the transaction in the transaction manager's list
 Author: Darren</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../project/adb/TransactionManager.html" title="class in project.adb">TransactionManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is part of a singleton implementation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#intake(project.adb.Instruction, int)">intake</A></B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
       int&nbsp;tID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This intake method is called when an instruction is either read or write
 Author: Darren and Viswanath</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#intake(int, boolean, int)">intake</A></B>(int&nbsp;tID,
       boolean&nbsp;readOnly,
       int&nbsp;timestamp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This intake method is called when a transaction begins.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#performRead(project.adb.Instruction, project.adb.Transaction)">performRead</A></B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
            <A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reads the value for the instruction if it can.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#performWrite(project.adb.Instruction, project.adb.Transaction)">performWrite</A></B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
             <A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performs the locks required to prepare the site(s) for a write.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#readonlySnap(project.adb.Transaction)">readonlySnap</A></B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a snapshot of the database for the given transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#removeReadLocksAtIndexForSite(int, int)">removeReadLocksAtIndexForSite</A></B>(int&nbsp;index,
                              int&nbsp;siteID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes the read locks for a given index on a site.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#shorterDump()">shorterDump</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when dump(s) instruction sent,
 this method dumps the committed values at each site.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#siteFail(int)">siteFail</A></B>(int&nbsp;siteID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When a site fails all transactions that have locks on its indexes
 must abort.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#siteRecover(int)">siteRecover</A></B>(int&nbsp;siteID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to recover a site.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../project/adb/TransactionManager.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prints each site's state, indexes and corresponding values
 Author: Darren</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="INSTANCE"><!-- --></A><H3>
INSTANCE</H3>
<PRE>
private static final <A HREF="../../project/adb/TransactionManager.html" title="class in project.adb">TransactionManager</A> <B>INSTANCE</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="output"><!-- --></A><H3>
output</H3>
<PRE>
private <A HREF="../../project/adb/Outputter.html" title="class in project.adb">Outputter</A> <B>output</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="transactions"><!-- --></A><H3>
transactions</H3>
<PRE>
private java.util.LinkedList&lt;<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&gt; <B>transactions</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="sites"><!-- --></A><H3>
sites</H3>
<PRE>
private <A HREF="../../project/adb/Site.html" title="class in project.adb">Site</A>[] <B>sites</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="TransactionManager()"><!-- --></A><H3>
TransactionManager</H3>
<PRE>
private <B>TransactionManager</B>()</PRE>
<DL>
<DD>This private constructor populates the transaction manager's sites.
 Author: Darren
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../project/adb/TransactionManager.html" title="class in project.adb">TransactionManager</A> <B>getInstance</B>()</PRE>
<DL>
<DD>This is part of a singleton implementation.
 Author: Darren
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the instance of the transaction manager</DL>
</DD>
</DL>
<HR>

<A NAME="addTransaction(project.adb.Transaction)"><!-- --></A><H3>
addTransaction</H3>
<PRE>
private void <B>addTransaction</B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;t)</PRE>
<DL>
<DD>Adds a transaction to the list of transactions.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - a transaction to add.</DL>
</DD>
</DL>
<HR>

<A NAME="findTransactionBy(int)"><!-- --></A><H3>
findTransactionBy</H3>
<PRE>
private <A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A> <B>findTransactionBy</B>(int&nbsp;id)</PRE>
<DL>
<DD>Finds the transaction in the transaction manager's list
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - the id of the transaction
<DT><B>Returns:</B><DD>the transaction with the given id</DL>
</DD>
</DL>
<HR>

<A NAME="abort(project.adb.Transaction, java.lang.String)"><!-- --></A><H3>
abort</H3>
<PRE>
private void <B>abort</B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction,
                   java.lang.String&nbsp;reason)</PRE>
<DL>
<DD>Sets the transaction's state to aborted and removes any locks it held
 on all sites.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>transaction</CODE> - the transaction to abort</DL>
</DD>
</DL>
<HR>

<A NAME="checkWaitingTransactions()"><!-- --></A><H3>
checkWaitingTransactions</H3>
<PRE>
public void <B>checkWaitingTransactions</B>()</PRE>
<DL>
<DD>Checks if waiting transactions can be attempted again.
 Author: Darren and Viswanath
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="intake(int, boolean, int)"><!-- --></A><H3>
intake</H3>
<PRE>
public void <B>intake</B>(int&nbsp;tID,
                   boolean&nbsp;readOnly,
                   int&nbsp;timestamp)</PRE>
<DL>
<DD>This intake method is called when a transaction begins.
 If it is a read-only transaction, then a snapshot for that
 transaction is saved.
 Author: Darren and Viswanath
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tID</CODE> - the id of the transaction<DD><CODE>readOnly</CODE> - true if the transaction is read-only, false otherwise<DD><CODE>timestamp</CODE> - the time the transaction begins</DL>
</DD>
</DL>
<HR>

<A NAME="intake(project.adb.Instruction, int)"><!-- --></A><H3>
intake</H3>
<PRE>
public void <B>intake</B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
                   int&nbsp;tID)</PRE>
<DL>
<DD>This intake method is called when an instruction is either read or write
 Author: Darren and Viswanath
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>instruction</CODE> - the instruction with what to do<DD><CODE>tID</CODE> - the id of the transaction</DL>
</DD>
</DL>
<HR>

<A NAME="readonlySnap(project.adb.Transaction)"><!-- --></A><H3>
readonlySnap</H3>
<PRE>
private void <B>readonlySnap</B>(<A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</PRE>
<DL>
<DD>Creates a snapshot of the database for the given transaction.
 Author: Darren and Viswanath
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>transaction</CODE> - the read-only transaction</DL>
</DD>
</DL>
<HR>

<A NAME="performWrite(project.adb.Instruction, project.adb.Transaction)"><!-- --></A><H3>
performWrite</H3>
<PRE>
private void <B>performWrite</B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
                          <A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</PRE>
<DL>
<DD>Performs the locks required to prepare the site(s) for a write.
 If the transaction cannot obtain the locks, it will wait or abort.
 Author: Darren and Viswanath
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>instruction</CODE> - the write instruction<DD><CODE>transaction</CODE> - the transaction that gave the instruction</DL>
</DD>
</DL>
<HR>

<A NAME="performRead(project.adb.Instruction, project.adb.Transaction)"><!-- --></A><H3>
performRead</H3>
<PRE>
private void <B>performRead</B>(<A HREF="../../project/adb/Instruction.html" title="class in project.adb">Instruction</A>&nbsp;instruction,
                         <A HREF="../../project/adb/Transaction.html" title="class in project.adb">Transaction</A>&nbsp;transaction)</PRE>
<DL>
<DD>Reads the value for the instruction if it can. It also obtains the locks
 for the given index. If it can't get the lock, it will either wait
 or abort.
 Author: Darren and Viswanath
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>instruction</CODE> - the read instruction<DD><CODE>transaction</CODE> - the transaction that sent the instruction</DL>
</DD>
</DL>
<HR>

<A NAME="removeReadLocksAtIndexForSite(int, int)"><!-- --></A><H3>
removeReadLocksAtIndexForSite</H3>
<PRE>
private void <B>removeReadLocksAtIndexForSite</B>(int&nbsp;index,
                                           int&nbsp;siteID)</PRE>
<DL>
<DD>Removes the read locks for a given index on a site.
 Used when a read lock is upgraded to a write lock.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>index</CODE> - the index to remove its read locks</DL>
</DD>
</DL>
<HR>

<A NAME="siteFail(int)"><!-- --></A><H3>
siteFail</H3>
<PRE>
public void <B>siteFail</B>(int&nbsp;siteID)</PRE>
<DL>
<DD>When a site fails all transactions that have locks on its indexes
 must abort.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>siteID</CODE> - the id of the failed site</DL>
</DD>
</DL>
<HR>

<A NAME="siteRecover(int)"><!-- --></A><H3>
siteRecover</H3>
<PRE>
public void <B>siteRecover</B>(int&nbsp;siteID)</PRE>
<DL>
<DD>Used to recover a site.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>siteID</CODE> - the id of the site to recover</DL>
</DD>
</DL>
<HR>

<A NAME="endTransaction(int)"><!-- --></A><H3>
endTransaction</H3>
<PRE>
public void <B>endTransaction</B>(int&nbsp;tID)</PRE>
<DL>
<DD>Called when a transaction ends, all its writes are committed and so
 values at sites are updated.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tID</CODE> - the id of the transaction to end.</DL>
</DD>
</DL>
<HR>

<A NAME="dump()"><!-- --></A><H3>
dump</H3>
<PRE>
public void <B>dump</B>()</PRE>
<DL>
<DD>Called when dump() instruction sent,
 this method dumps each site's indexes and corresponding values.
 Author: Darren
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="dumpSite(int)"><!-- --></A><H3>
dumpSite</H3>
<PRE>
public void <B>dumpSite</B>(int&nbsp;siteID)</PRE>
<DL>
<DD>Called when dump(i) instruction sent,
 this method dumps the given site's indexes and corresponding values.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>siteID</CODE> - the id of the site to dump.</DL>
</DD>
</DL>
<HR>

<A NAME="shorterDump()"><!-- --></A><H3>
shorterDump</H3>
<PRE>
public void <B>shorterDump</B>()</PRE>
<DL>
<DD>Called when dump(s) instruction sent,
 this method dumps the committed values at each site.
 Author: Darren and Viswanath
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="dumpIndex(int)"><!-- --></A><H3>
dumpIndex</H3>
<PRE>
public void <B>dumpIndex</B>(int&nbsp;index)</PRE>
<DL>
<DD>Called when dump(xi) instruction sent,
 this method dumps the given index's corresponding values at each site.
 Author: Darren
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>index</CODE> - the index to dump</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD>Prints each site's state, indexes and corresponding values
 Author: Darren
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../project/adb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TransactionManager.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../project/adb/Transaction.html" title="class in project.adb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?project/adb/TransactionManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TransactionManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
